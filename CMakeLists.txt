cmake_minimum_required(VERSION 3.13)
project(ez VERSION 1.0.0)

set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

include(GNUInstallDirs)
include(CTest)

if (BUILD_TESTING)
    include(tests-config.cmake)
endif()

#######################################################
# Common compile options.
#######################################################
if (MSVC)
    add_compile_options(
        /EHsc
        /Wall
        /WX
    )
else()
    add_compile_options(
        -Wall
        -Wcast-align
        -Wconversion
        -Wctor-dtor-privacy
        -Werror
        -Wextra
        -Wno-unknown-attributes
        -Wnon-virtual-dtor
        -Wold-style-cast
        -Woverloaded-virtual
        -Wpedantic
        -Wshadow
        -Wsign-conversion
    )
endif()

add_subdirectory(ez)
